@page
@model BookHavenWebApp.Pages.CheckoutModel
@{
}


<div class="container p-5 px-md-2">
    <main>
        <div class="pb-2 text-center">
            <h2>Checkout</h2>
            <a class="link-custom" asp-page="/Cart">
                <p class="lead link-custom">Return to Cart</p>
            </a>
        </div>
        <hr class="my-4">

        <div class="row g-5">
            <!-- Cart Summary -->
            <div class="col-md-5 order-md-last">
                <h4 class="d-flex justify-content-between align-items-center mb-3">
                    <span class="text-primary text-custom">Your cart</span>
                    <span class="badge bg-primary rounded-pill btn-custom">@Model.TotalCartQuantity</span>
                </h4>
                <ul class="list-group mb-3">
                    @foreach (var item in Model.OrderItems)
                    {
                        <li class="list-group-item d-flex justify-content-between lh-sm">
                            <div>
                                <a href="/BookDetails/@item.Book.Id" class="card-link">
                                    <h6 class="my-0">@item.Book.Title (@item.Quantity)</h6>
                                </a>
                                <small class="text-muted">@item.Book.Author</small>
                            </div>
                            <span class="text-muted">€@item.Price</span>
                        </li>
                    }
                    <li class="list-group-item d-flex justify-content-between">
                        <span>Total Price</span>
                        <strong>€@Model.TotalPrice</strong>
                    </li>
                </ul>
            </div>

            <!-- Shipping and Payment Form -->
            <div class="col-md-7">
                <h4 class="mb-3">Shipping address</h4>
                <form method="post" class="needs-validation" novalidate>
                    <div class="row g-3">
                        <!-- Address Field -->
                        <div class="col-12">
                            <label for="address" class="form-label">Address</label>
                            <input type="text" class="form-control" id="address" name="Address" asp-for="Address" placeholder="1234 Main St" required>
                            <div class="invalid-feedback">
                                Please enter your shipping address.
                            </div>
                        </div>

                        <!-- Country Dropdown -->
                        <div class="col-md-5">
                            <label for="country" class="form-label">Country</label>
                            <select class="form-select" id="country" name="Country" asp-for="Country" required>
                                <option value="">Choose...</option>
                                <option>Netherlands</option>
                                <option>South Africa</option>
                                <option>Germany</option>
                                <option>Spain</option>
                            </select>
                            <div class="invalid-feedback">
                                Please select a valid country.
                            </div>
                        </div>

                        <!-- City Input -->
                        <div class="col-md-4">
                            <label for="city" class="form-label">City</label>
                            <input type="text" class="form-control" id="city" name="City" asp-for="City" placeholder="City Name" required>
                            <div class="invalid-feedback">
                                Please provide a valid city.
                            </div>
                        </div>

                        <!-- Zip Code -->
                        <div class="col-md-3">
                            <label for="zip" class="form-label">Zip Code</label>
                            <input type="text" class="form-control" id="zip" name="ZipCode" asp-for="ZipCode" placeholder="12345" required>
                            <div class="invalid-feedback">
                                Zip code required.
                            </div>
                        </div>
                    </div>

                    <hr class="my-4">

                    <!-- Payment Details -->
                    <h4 class="mb-3">Payment</h4>
                    <div class="row gy-3">
                        <!-- Card Holder Name -->
                        <div class="col-md-6">
                            <label for="cc-name" class="form-label">Name on Card</label>
                            <input type="text" class="form-control" id="cc-name" name="CardHolderName" asp-for="CardHolderName" placeholder="John Doe" required>
                            <small class="text-muted">Full name as displayed on card</small>
                            <div class="invalid-feedback">
                                Name on card is required.
                            </div>
                        </div>

                        <!-- Credit Card Number -->
                        <div class="col-md-6">
                            <label for="cc-number" class="form-label">Credit Card Number</label>
                            <input type="text" class="form-control" id="cc-number" name="CardNumber" asp-for="CardNumber" placeholder="1234-5678-9012-3456" required>
                            <div class="invalid-feedback">
                                Credit card number is required.
                            </div>
                        </div>

                        <!-- Expiration Date -->
                        <div class="col-md-3">
                            <label for="cc-expiration" class="form-label">Expiration</label>
                            <input type="text" class="form-control" id="cc-expiration" name="ExpiryDate" asp-for="ExpiryDate" placeholder="MM/YY" required>
                            <div class="invalid-feedback">
                                Expiration date required.
                            </div>
                        </div>

                        <!-- CVV -->
                        <div class="col-md-3">
                            <label for="cc-cvv" class="form-label">CVV</label>
                            <input type="text" class="form-control" id="cc-cvv" name="CVV" asp-for="CVV" placeholder="123" required>
                            <div class="invalid-feedback">
                                Security code required.
                            </div>
                        </div>
                    </div>

                    <hr class="my-4">

                    <!-- Submit Button -->
                    <button class="w-100 btn btn-primary btn-lg" type="submit">Checkout</button>
                </form>
            </div>
        </div>
    </main>
</div>

